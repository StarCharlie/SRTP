{"version":3,"file":"js/756.1a82cdc0.js","mappings":"ugBA+DUA,EAAY,CAACC,EAAKC,KACpB,GAAU,IAAPA,EAAW,OAAOD,EAClBA,EAAIE,QAAU,MAAKF,EAAMA,EAAIG,UAAU,EAAG,KAAO,OACpD,MAAMC,EAAM,IAAIC,OAAOJ,EAAK,MAC5B,OAAOD,EAAIM,QAAQF,GAAMG,GACb,+BAA8BA,YACxC,EAGAC,EAAmBC,GACZ,gBAARA,EAA+B,CAAC,KAAM,UAAW,GACpC,eAARA,EAA8B,CAAC,KAAM,OAAQ,GACrC,mBAARA,EAAkC,CAAC,KAAM,UAAW,GAChD,KAId,EAAe,CACfC,OACI,MAAM,CACNC,UAAW,CACPC,KAAM,GACNC,YAAa,EACbC,UAAW,GACXC,aAAc,CACVC,QAAQ,EACRC,OAAO,EACPC,WAAW,IAGnBR,KAAM,KACNS,YAAa,KACbC,YAAY,EACZC,MAAO,CACDC,eAAgB,GAChBC,QAAS,GACTC,SAAU,IAGpB,EACAC,UAC+B,MAA1BC,KAAKC,OAAOC,MAAMhB,OACnBc,KAAKf,UAAUC,KAAOc,KAAKC,OAAOC,MAAMhB,MAE1Cc,KAAKG,QACP,EACAC,QAAS,CACLC,aAAaC,GACTA,EAAYC,KAAIC,IACZA,EAAK,SAAWnC,EAAUmC,EAAK,SAAUR,KAAKf,UAAUC,MACxDsB,EAAK,SAAWnC,EAAUmC,EAAK,SAAUR,KAAKf,UAAUC,KAAK,IAEjEc,KAAKhB,KAAOsB,CAChB,EACAH,SACIH,KAAKS,MAAMC,KAAK,eAAgBV,KAAKf,WAAW0B,MAAKC,IACjDZ,KAAKN,YAAa,EAClBM,KAAKK,aAAaO,EAAI5B,KAAK,SAC3BgB,KAAKP,YAAcmB,EAAI5B,KAAK,cAAc,GAElD,EACA6B,cAAcC,EAAIC,GAChBf,KAAKgB,QAAQC,KAAK,CAChBC,KAAM,SACNhB,MAAO,CACL,GAAMY,EACN,SAAYC,IAGlB,EACAF,WAAWC,GACPd,KAAKL,MAAM,WAAyC,MAA3BK,KAAKmB,SAASC,IAAI,OAAkB,EAAIpB,KAAKmB,SAASC,IAAI,MACnFpB,KAAKL,MAAM,kBAAoBK,KAAKC,OAAOC,MAAMa,SACjDf,KAAKL,MAAM,YAAcmB,EACzBd,KAAKS,MAAMC,KAAK,iBAAkBV,KAAKL,OAAOgB,MAAKC,IACvB,WAAvBA,EAAI5B,KAAK,WAAyBqC,MAAM,QACtCA,MAAMT,EAAI5B,KAAK,WAAW,GAErC,I,q3FCvIR,MAAMsC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://front/./src/MainView/SearchView.vue","webpack://front/./src/MainView/SearchView.vue?9f5f"],"sourcesContent":["<!-- for search -->\r\n<template>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"16\" :offset=\"4\">\r\n        <el-input v-model=\"transform.word\" placeholder=\"请搜索\">\r\n            <template #append>\r\n                <el-button style=\"margin-left: -20px; margin-top: 0px; height: 60px;width: 70px; font-size: 40px;\" @click=\"search\" :icon=\"Search\" round/>\r\n            </template>\r\n        </el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\"></el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"20\" v-if=\"showResult\">\r\n        <el-col :span=\"20\" :offset=\"2\">\r\n            <!-- 选择框 -->\r\n            <div style=\"text-align: center;\">\r\n                <el-checkbox v-model=\"transform.select_infor.xuewei\" @change=\"search()\" label=\"穴位\" size=\"large\" />\r\n                <el-checkbox v-model=\"transform.select_infor.jiufa\" @change=\"search()\" label=\"灸法\" size=\"large\" />\r\n                <el-checkbox v-model=\"transform.select_infor.bingzheng\" @change=\"search()\" label=\"病症\" size=\"large\" />\r\n            </div>\r\n            <!-- 对card进行相关的设计 -->\r\n              <el-card v-for=\"item in data\" :key=\"item\" shadow=\"always\">\r\n                <el-row :gutter=\"20\">\r\n                  <!-- 图片部分 -->\r\n                  <el-col :span=\"5\">\r\n                    <img src=\"../assets/logo.png\" class=\"image\">\r\n                  </el-col>\r\n                  <!-- 文字部分 -->\r\n                  <el-col :span=\"13\" :offset=\"1\">\r\n                    <h2 id=\"title\" v-html=\"item['title']\"></h2>\r\n                    <!-- 总有一天我会把这个逆天操作改掉 -->\r\n                    <el-tag class=\"ml-2\" size=\"large\" :type=\"index_translate(item['index'])[1]\" >{{ index_translate(item['index'])[0] }}</el-tag>\r\n                    <p id=\"infor\" v-html=\"item['infor']\"></p>\r\n                  </el-col>\r\n                  <!-- 按钮部分 -->\r\n                  <el-col :span=\"5\">\r\n                    <div style=\"text-align: -webkit-center\">\r\n                      <el-button type=\"primary\" style=\"width:150px\" @click=\"toInfor(item['id'],  index_translate(item['index'])[2])\">详情</el-button>\r\n                    </div>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-card>\r\n              <div style=\"margin-top: 50px; margin-left: 20px; margin-bottom: 50px;\">\r\n                <el-pagination\r\n                  @size-change=\"search()\"\r\n                  @current-change=\"search()\"\r\n                  v-model:current-page=\"transform.page_number\"\r\n                  :page-sizes=\"[5, 10, 15, 20]\"\r\n                  v-model:page-size=\"transform.page_size\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"totalNumber\">\r\n                </el-pagination>\r\n              </div>\r\n        </el-col>\r\n        <el-col :span=\"2\"></el-col>\r\n    </el-row>\r\n</template>\r\n\r\n<script setup>\r\nimport { Search } from '@element-plus/icons-vue'\r\n</script>\r\n\r\n<script>\r\n    const highLight = (str, key) => {\r\n        if(key == \"\") return str;\r\n        if(str.length >= 200) str = str.substring(0, 200) + \"...\";\r\n        const reg = new RegExp(key, 'ig')\r\n        return str.replace(reg, (val) => {\r\n            return `<span style=\"color:#66CCFF\">${val}</span>`\r\n        })\r\n\r\n    }\r\n    const index_translate = (name) =>{\r\n      if(name == \"xuewei_infor\") return [\"穴位\", \"success\", 0]\r\n      else if(name == \"jiufa_infor\") return [\"灸法\", \"info\", 1]\r\n      else if(name == \"bingzheng_infor\") return [\"病症\", \"warning\", 2]\r\n      else return \"其它\"\r\n    }\r\n\r\n\r\n    export default {\r\n    data(){\r\n        return{\r\n        transform: {\r\n            word: \"\",\r\n            page_number: 1,\r\n            page_size: 10,\r\n            select_infor: {\r\n                xuewei: true,\r\n                jiufa: true,\r\n                bingzheng: true,\r\n            },\r\n        },\r\n        data: null,\r\n        totalNumber: null,\r\n        showResult: false,\r\n        favor: {\r\n              infor_category: \"\",\r\n              user_id: \"\",\r\n              infor_id: \"\",\r\n            },\r\n        }\r\n    },\r\n    created(){\r\n      if(this.$route.query.word != null){\r\n        this.transform.word = this.$route.query.word\r\n      }\r\n      this.search();\r\n    },\r\n    methods: {\r\n        cSuggestions(suggestions){\r\n            suggestions.map(item => {\r\n                item['title'] = highLight(item['title'], this.transform.word)\r\n                item['infor'] = highLight(item['infor'], this.transform.word)\r\n            })\r\n            this.data = suggestions;\r\n        },\r\n        search(){\r\n            this.$http.post('/home/search', this.transform).then(res=>{\r\n                this.showResult = true;\r\n                this.cSuggestions(res.data['data']);\r\n                this.totalNumber = res.data['totalNumber'];\r\n            });\r\n        },\r\n        async toInfor(id, category){\r\n          this.$router.push({\r\n            path: '/Infor',\r\n            query: {\r\n              'id': id,\r\n              'category': category,\r\n            }\r\n          })\r\n        },\r\n        async like(id){\r\n            this.favor['user_id'] = (this.$cookies.get('id') == null) ? -1 : this.$cookies.get('id');\r\n            this.favor['infor_category'] = this.$route.query.category;\r\n            this.favor['infor_id'] = id;\r\n            this.$http.post('/home/HomeView', this.favor).then(res=>{\r\n              if(res.data['message'] == \"success\") alert(\"收藏成功\");\r\n              else alert(res.data['message']);\r\n            });\r\n        },\r\n    }\r\n  }\r\n  </script>\r\n\r\n<style scoped>\r\n\r\n.el-button{\r\n  margin-left: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-card{\r\n  margin-top: 50px;\r\n}\r\n.image{\r\n  margin-top: 40px;\r\n  height: 150px; \r\n  width: 250px;\r\n}\r\n.el-input{\r\n    margin-top: 30px;\r\n    height: 60px;\r\n}\r\n</style>","import script from \"./SearchView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SearchView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SearchView.vue?vue&type=style&index=0&id=7c22e513&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\LearningMaterials\\\\srtp\\\\front\\\\SRTP-Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c22e513\"]])\n\nexport default __exports__"],"names":["highLight","str","key","length","substring","reg","RegExp","replace","val","index_translate","name","data","transform","word","page_number","page_size","select_infor","xuewei","jiufa","bingzheng","totalNumber","showResult","favor","infor_category","user_id","infor_id","created","this","$route","query","search","methods","cSuggestions","suggestions","map","item","$http","post","then","res","async","id","category","$router","push","path","$cookies","get","alert","__exports__"],"sourceRoot":""}